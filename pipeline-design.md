See pipeline-design.md for the 7-stage design.
